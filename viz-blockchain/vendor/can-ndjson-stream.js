!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.canNdjsonStream=e()}}(function(){return function e(r,n,t){function o(i,f){if(!n[i]){if(!r[i]){var u="function"==typeof require&&require;if(!f&&u)return u(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[i]={exports:{}};r[i][0].call(d.exports,function(e){var n=r[i][1][e];return o(n?n:e)},d,d.exports,e,r,n,t)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(e,r,n){var t=e("can-namespace"),o=function(e){var r,n=!1;return new ReadableStream({start:function(t){var o=e.getReader();r=o;var a=new TextDecoder,i="";o.read().then(function e(r){if(r.done){if(n)return;if(i=i.trim(),0!==i.length)try{var f=JSON.parse(i);t.enqueue(f)}catch(e){return void t.error(e)}return void t.close()}var u=a.decode(r.value,{stream:!0});i+=u;for(var c=i.split("\n"),d=0;d<c.length-1;++d){var l=c[d].trim();if(l.length>0)try{var s=JSON.parse(l);t.enqueue(s)}catch(e){return t.error(e),n=!0,void o.cancel()}}return i=c[c.length-1],o.read().then(e)})},cancel:function(e){console.log("Cancel registered due to ",e),n=!0,r.cancel()}})};r.exports=t.ndjsonStream=o},{"can-namespace":2}],2:[function(e,r,n){r.exports={}},{}]},{},[1])(1)});